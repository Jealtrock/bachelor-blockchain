\chapter{Sicherheit}
Für die Beantwortung der zugrundeliegenden Fragestellung, ob die ausgewählten Distributed Ledger Technologien zukunftsfähig sind, müssen die Sicherheitsmechanismen untersucht werden, durch die diese Technologien vor Angriffen geschützt sind. Die gewählten Technologien werden darüber hinaus auch darauf geprüft, wie gut die Zahlungsmittel in der jeweiligen virtuellen Geldbörse vor Diebstahl geschützt sind. Dies beinhaltet auch zum einen, mit welchen Verschlüsselungsalgorithmen gearbeitet wird und zum anderen wie sicher sie sind. Weiterhin soll ergründet werden, welche Ausmaße fehlerhafte Nutzung der Technologie auf die Sicherheit hat.

\section{Bitcoin}
Bitcoin setzt bei seiner Implementierung auf die Blockchain-Technologie, diese enthält intrinsische Sicherheitsrisiken, die bei der Umsetzung dieser Kryptowährung adressiert werden mussten. Im folgenden werden diese Risiken und das entsprechende Sicherheitsmerkmal auf Zukunftssicherheit geprüft.

\subsection{Konto Sicherheit}
Bitcoins gehören zu einer digitalen Geldbörse. Diese Geldbörse ist vereinfacht betrachtet ein digitaler Schlüssel zu dem nur der Eigentümer Zugang haben sollte. Es ist nur mit diesem Schlüssel möglich, zu beweisen welche und wie viele Bitcoins einer bestimmten Person zugeordnet sind. Die Generierung der Schlüssel basiert auf ein ECC (Elliptic Curve Cryptography) Verschlüsselungsverfahren (siehe zu ECC \ref{ECC} auf Seite \pageref{ECC}).

Aus diesem privatem Schlüssel kann der öffentliche Schlüssel nachvollzogen werden, die eine Adresse darstellt, an die Bitcoins gesendet oder, von ihr ausgehend, Bitcoins versendet werden. Der öffentliche Schlüssel wird nochmals mit SHA256 und dann mit RIPEMD-160 gehasht. Die resultierende Zeichenfolge nennt sich eine P2PKH-Adresse (Pay To Public Key Hash). Sie besteht aus 27-34 alphanumerischer Zeichen mit Ausnahme von einigen Buchstaben/Zahlen für eine bessere Lesbarkeit. Dies geschieht als Absicherung für den Fall, dass es durch einen neuentdeckten Algorithmus  möglich sein sollte, das ECDSA-Verschlüsselungsverfahren zu invertieren und den privaten Schlüssel aus dem öffentlichen Schlüssel zu generieren.

Ein privater Schlüssel bei Bitcoin besteht aus 256 Bits. Daraus erschließen sich $ 2^{256} \approx 1,16 \times 10^{77} $ Kombinationsmöglichkeiten für einen privaten Schlüssel. Die Wahrscheinlichkeit, dass eine andere Instanz denselben Schlüssel generiert, stellt somit kein Sicherheitsrisiko dar.

\subsection{Anonymität}
Durch die vollständige, öffentlich zugängliche Historie \emph{aller} Bitcointransaktionen ist das Netzwerk transparent. Es ist möglich Bitcoins zurückzuverfolgen, um nachvollziehen zu können, durch welche Adressen diese gelaufen sind. 

Aufgrund dessen liegt der Aspekt der Anonymität nicht in der Verhüllung der Transaktionen, sondern in der Verschleierung der Identität. Private und öffentliche Schlüssel-Paare sind von der Identität des Nutzers entkoppelt, was wiederum bedeutet, dass der Schutz der Identität bei der Verantwortung des Nutzers liegt. Der Nutzer kann durch neue Schlüsselpaare versuchen seine Person weiter zu verschleiern und eine Zurückverfolgung zu erschweren. Aber auch ein sparsames Herausgeben von Informationen sollte angeführt werden als ein "`Best-Practise"'-Umgang mit Kryptowährungen allgemein.

\subsection{Validität einer Transaktion}
Eine Transaktion wird von allen Nodes verifiziert an die die Transaktion geschickt wird. Diese überprüfen die Transaktion auf diverse Kriterien wie unter anderem auf Syntax und ob die Inputs mit den Outputs übereinstimmen. Nachdem die Transaktion als valide eingestuft wurde, wird sie in die Liste hinzugefügt, die sich in dem - zu minenden - Block befindet.

Wenn der passende Hash zu dem Block gefunden wurde, wird dieser Block von der Node in das Netzwerk ausgesendet. Andere Nodes verifizieren diesen Block auf Korrektheit der Syntax und der enthaltenen Transaktionen. Nur wenn diese korrekt sind, dann wird an der Erzeugung des nächsten Blocks auf Basis des vorherigen Blocks gearbeitet.

Es ist also für einen Angreifer nicht möglich ungültige Transaktionen in das Netzwerk zu veröffentlichen, da sie nicht von ehrlichen Nodes angenommen werden würden. Dasselbe gilt auch für ungültige Blöcke. Das wird garantiert durch die vollständige Historie aller Bitcoins seit dem ersten Block, die jede Full-Node gespeichert hat. Es wäre realistisch nicht wahrscheinlich, dass ein Angreifer langfristig eine längere Kette als die Hauptblockchain erzeugen kann, wenn er nicht 50\% der Gesamtleistung des Netzwerkes besitzt (mehr hierzu bei \ref{bitcoin:angriffsszenarios} auf Seite \pageref{bitcoin:angriffsszenarios}). Das ist nämlich nötig um als korrekte Kette angesehen zu werden, es gilt:\\Die Kette, die am meisten Rechenleistung bürgt (längste Kette) ist die Hauptkette.

Jedoch sollte angemerkt werden, dass durch die Wahrscheinlichkeit, dass ein Angreifer kurzfristig mehr Blöcke erzeugen könnte als die Hauptkette, eine Transaktion erst nach ca. sechs weiteren Blöcken als bestätigt angesehen werden sollte.

\subsubsection{51\%-Attacke}\label{bitcoin:angriffsszenarios}
In Satoshi Nakamotos Bitcoin-Whitepaper wird erklärt, wie ein möglicher Angriff durchzuführen wäre. Er beschreibt ein Szenario, welches als 51\%-Attacke bekannt ist. Grundlegend hiermit gemeint, das ein Angreifer mehr als 50\% der Hash-Rate (Gesamteistung) des Netzwerkes besitzt und diese Leistung nutzt um schneller eigene Blöcke in das Netzwerk zu publizieren.

Dies wird nützlich, um Transaktionen die man getätigt hat ungültig zu machen indem man eine weitere Transaktion von der Adresse an eine andere, eigene Adresse erstellt. Zum Beispiel kann damit ein Verkäufer getäuscht werden, sodass die Person denkt, man hätte die Bitcoins gezahlt. Im Hintergrund jedoch erstellt der Angreifer seine eigene Blockchain mit der, zu diesem Zweck, erstellten Transaktion an die eigene Adresse, womit zugleich die anfängliche Transaktion nicht mehr in einen Block aufgenommen werden kann, da die Bitcoins nicht mehr an der hinterlegten Adresse sind. Es müssen solange Blocks erzeugt werden, bis die falsche Blockchain länger ist als die ehrliche.

Bei einem erfolgreichen Angriff würde die eigene Wallet nicht mit der Zahlung an den Verkäufer belastet werden. Ein weiterer Nebeneffekt ist, dass womöglich viele Transaktionen in der Hauptkette nicht mehr validiert sind und erneut aufgenommen werden müssen.

Der Angriff hat jedoch Grenzen. Es können keine ungültigen Blöcke vom Angreifer erstellt werden, da diese von anderen ehrlichen Nodes nicht angenommen werden würden. Der Konsens liegt weiterhin bei der Hauptkette.

Dieses Szenario ist auch denkbar bei einer Hash-Rate von unter 50\%, wird jedoch immer unwahrscheinlicher je mehr Blöcke der Angreifer zurückliegt.

\begin{figure}[H]%
\includegraphics[scale=0.60]{26Prozent.PNG}%
\caption{Je weiter der Angreifer zurückliegt desto unwahrscheinlicher ein erfolgreicher Angriff (Quelle https://www.btc-echo.de/tutorial/bitcoin-51-attacke/)}%
\label{fig:26prozent}%
\end{figure}

Langfristig kann die Hauptkette nur ersetzt werden, wenn über 50\% der Hash-Rate dem Angreifer zur Verfügung stehen.
\begin{figure}[H]%
\includegraphics[scale=0.6]{51Prozent.PNG}%
\caption{Wahrscheinlichkeit sechs Blöcke hintereinander zu generieren (Quelle https://www.btc-echo.de/tutorial/bitcoin-51-attacke/)}%
\label{fig:51prozent}%
\end{figure}

Satoshi Nakamoto führt folgende Formel zur Berechnung der Wahrscheinlichkeit an, dass ein Angreifer die Blockchain einholen kann aus \emph{z} Blöcken im Rückstand. Der zeitliche Rahmen ist unbegrenzt.

$ p = $ Wahrscheinlichkeit, dass ein ehrlicher Node den nächsten Block erstellt\\
$ q = $ Wahrscheinlichkeit, dass der Angreifer den nächsten Block erstellt\\
$ q_{z} = $ Wahrscheinlichkeit, dass der Angreifer die ehrliche Blockchain überhohlt\\

$ q_{z} = 1 \quad\quad\quad\: wenn\ p\leq q \\
q_{z} = $ ( $ \frac{p}{q} $ ) $^{z} \quad wenn\ p > q $

Es geht hervor, dass die Chancen des Angreifers die Hauptkette zu überhohlen bei unter 50\% Hash-Rate exponentiell schwinden.

Diese Angriffsfläche eröffnet sich aufgrund der dezentralen Architektur von Blockchain und ist ein integraler Bestandteil eines, auf Konsens beruhenden, Systems.

\subsection{Anreiz zur Ehrlichkeit}
Durch die Entlohnung in Form von Bitcoins durch das Minen und durch die Transaktionsgebühren wird Anreiz geschaffen, das Bitcoin-Netzwerk nicht zu manipulieren. Eine Kette mit ungültigen Blöcken würde auch nicht von ehrlichen Minern angenommen werden. Daher wird erhofft ~\cite{onlinebeispiel}, dass die Belohnung und das Eigeninteresse an der Integrität von Bitcoin ausreicht um Angreifer abzuwehren.

\subsection{Quantenprozessorresistenz}
Mit der Einführung leistungsstarker Quantenprozessoren, die darauf ausgelegt sind, kryptographische Algorithmen zu entschlüsseln, könnten Algorithmen (unter anderem ECDSA) unsicher werden. Auch die starke Leistung von Quantencomputern eröffnet eine neue Angriffsfläche unter dem Aspekt, dass der Anteil von über der Hälfte der Gesamtleistung des Miner-Netzwerkes dem Nutzer langfristig eine längere Blockchain gewähren kann. Auf dieses Problem wird in Abschnitt \ref{bitcoin:angriffsszenarios} eingegangen.

Die genutzten kryptographischen Algorithmen sind nicht bewiesen, dass sie Quantenprozessoren standhalten könnten~\cite{ja:quanten}. Indes ist das Bitcoin-Netzwerk durch ihre Architektur und Nutzung nicht gegen Quantencomputern geschützt. Aber komplett ungeschützt bleibt die Technologie nicht.

Auch wenn der ECDSA mit einem entsprechenden Algorithmus gelöst werden sollte, oder durch Quantenprozessoren in anderer Hinsicht unsicher werden sollte, wird durch das hashen des öffentlichen Schlüssels genau dieser verschleiert. Er kommt nur zum Vorschein, wenn von dieser Adresse eine Zahlung ausgeht, aufgrund der Signatur. Wenn nun von da an ein neues Schlüsselpaar generiert und genutzt wird, sollten die Bitcoins an der neuen Adresse sicher sein.

\section{IOTA}
IOTA nutzt im Gegensatz zu Bitcoin keine Blockchain-Technologie, sondern setzt auf ein sogenanntes Tangle, welches wiederum auf einem mathematischem Konzept basiert, welches sich Directed-Acyclic-Graph (DAG) nennt (siehe zu Tangle \ref{grundlagen:tangle} auf Seite \pageref{grundlagen:tangle}). Dieses Konzept unterscheidet sich grundsätzlich von Blockchain und weist unter diesem Aspekt andere Sicherheitsrisiken auf. Im folgenden sollen diese beschrieben werden.

\subsection{Konto Sicherheit}
Auch bei IOTA besteht das Konto aus einem digitalen Schlüssel, dem Seed. Dieser Seed sollte nur dem Eigentümer verfügbar gemacht werden, da jede Person mit diesem Seed, über die zugeordneten IOTAs verfügen kann. Für einen optimalen Schutz vor digitalem Diebstahl sollten Seeds nur lokal (ohne Internetzugang) erstellt und gespeichert werden. Wenn diese allgemeinen Sicherheitsvorschläge eingehalten werden, besteht hier noch kein nennenswertes Risiko.

Ein Seed besteht aus 81 Trytes (siehe zu Trytes Grundlagen \ref{grundlagen:tritsundtrytes} auf Seite \pageref{grundlagen:tritsundtrytes}). Ein Tryte enthält drei Trits und kann folglich 27 ganze Zahlen darstellen. Daraus ergeben sich $ 27^{81} \approx 8,72 \times 10^{115} $ verschiedene Kombinationsmöglichkeiten. Das heißt, die Wahrscheinlichkeit, dass eine andere Instanz denselben Seed generiert wie der Eigentümer ist $ 1 : 8,72 \times 10^{115} $, damit ist die Anzahl der Kombinationsmöglichkeiten deutlich höher als die Anzahl der Atome im bekannten Universum\footnote{Nach Rechnung auf https://elearning.physik.uni-frankfurt.de/data/FB13-PhysikOnline/lm\_data/lm\_282/auto/kap09/cd236b.htm}.

Durch das One-Time-Winternitz hashing (siehe zu One-Time-Winternitz Funktion \ref{OneTimeSignature} auf Seite \pageref{OneTimeSignature}) ist eine Adresse für ausgehende Zahlungen nur einmal zu benutzen, da ein Teil des privaten Schlüssels bekannt wird. Sollte die Adresse mehr als einmal genutzt werden, so wird zu viel des privaten Schlüssels öffentlich gemacht und eine Entschlüsselung wird zunehmend einfacher. Ist der private Schlüssel vollständig enthüllt, kann der Angreifer auf die IOTAs zugreifen die auf der Adresse hinterlegt sind.

Hierdurch eröffnet sich ein Risiko, welches der Nutzer von IOTA selbst entgegnen muss, wenn er nicht das offizielle IOTA-Wallet Programm nutzt, dieses übernimmt die Adressverwaltung automatisch. Hierzu muss angemerkt werden, dass durch die Kompromittierung des privaten Schlüssels nicht der Seed oder alle anderen Adressen des Opfers gefährdet sind.

\subsection{Anonymität}
Es ist wichtig zu betrachten, wie Anonym die Identität im Tangle-Netzwerk ist. Zum einen was Nutzer über andere Teilnehmer wissen können und zum anderen was in einer Transaktion über die Identität preisgegeben wird.

Um eine Transaktion zu veranlassen wird ein Paar aus privatem und öffentlichem Schlüssel benötigt, welche aus dem Seed und einem Adressindex generiert werden. Der öffentliche Schlüssel dient hierbei als Adresse die man an seinen Transaktionspartner weitergeben kann. Der private Schlüssel wird genutzt um die Inputs eines Bundles zu signieren. Damit wird bewiesen, dass der Ersteller der Transaktion den privaten Schlüssel zu der Adresse besitzt und folglich der Eigentümer ist.

Das Problem welches hieraus resultiert ist, dass durch die transparente Architektur des Tangles jede Transaktion für alle Teilnehmer ersichtlich ist. Dies ist zwingend notwendig um für die Liquidität des Zahlenden bürgen zu können. Es eröffnet anderen Nutzern jedoch eine Möglichkeit, IOTAs einer anonymen Identität zuordnen zu können. Doch wie bei Bitcoin auch, ist die eigene Identität nicht mit dem IOTA Seed verknüpft und sollte verhüllt bleiben. Auch ein Preisgeben der eigenen personenbezogenen Daten im "`signatureMessageFragment"' stellt ein Sicherheitsrisiko dar, welches dem Nutzer bewusst sein muss.

\subsection{Validität einer Transaktion}
Eine Transaktion wird von anderen Nodes geprüft. Typischerweise geschieht das wenn ein Nutzer eine Transaktion in das Tangle publizieren will. Dafür muss er zwei Tips validieren. Das Transaktionsobjekt muss diese Tips als "`branch"'- und "`trunkTransaction"' referenzieren und überprüfen.

Das Objekt wird daraufhin auf Syntax und Gültigkeit geprüft was bedeutet, dass die Transaction-Hash abgeglichen und die Signierung überprüft wird. Wenn die Tips gültig sind, kann die eigene Transaktion diese eintragen und dann publiziert werden.

Eine Transaktion gilt als verifiziert, wenn sie durch einen bestimmten Anteil neuer Tips referenziert und damit validiert wird. Der Wert kann selber bestimmt werden, zum Beispiel kann festgelegt werden, das die Transaktion als verifiziert gilt, wenn sie von mehr als 75\% aller Tips direkt oder indirekt referenziert wird.

Eine falsche Transaktion (zum Beispiel nicht genügend IOTAs) könnte so von falschen Transaktionen in einer Sub-Tangle vorerst validiert werden. Jedoch spätestens wenn eine andere Transaktionen die Haupt-Tangle mit der falschen Sub-Tangle validieren, ein Konflikt entstehen. Der Konflikt wird aufgelöst indem neue Tips ausgewählt werden und so eine der beiden Sub-Tangles nicht weiter verifiziert wird. Dadurch verwaist diese Sub-Tangle langfristig und diejenige mit dem höheren "`Gewicht"' (mehr Proof-Of-Work) wird für neue Transaktionen genutzt. Das heißt auch, das die anderen, validen Transaktionen, die sich in der falschen Sub-Tangle befinden, nun auch verwaisen und nicht mehr Bestätigt werden können. Diese müssen neu in die Tangle eingebunden werden um eine weitere Chance auf Validierung zu bekommen.

\subsection{Angriffsszenarien}
Die Tangle ermöglicht durch ihre DAG spezifische Arten von Attacken die im weiteren Fortgang erläutert werden sollen. Durch die Darstellung der möglichen Angriffe, werden weitere Sicherheitsmechanismen veranschaulicht.

\subsubsection{34\%-Attacke}
Ein böswilliger Nutzer könnte mit mehr als 34\% der Gesamtrechenleistung im Tangle-Netzwerk einen Angriff starten indem er falsche Transaktionen mit vielen anderen selbst initiierten Transaktionen verifiziert und damit im DAG einen Strang erzeugt der falsche Informationen über die verfügbaren IOTAs enthält.

Dem entgegenwirken soll der, von der IOTA-Foundation bereitgestellte, Coordinator. Dieser ist ein Node, der eigenständig Transaktionen erstellt, die als Meilenstein (Milestone) gelten. Der Milestone dient als Beweis, dass die vorherigen Transaktionen korrekt sind. Jede Transaktion muss diese Coordinators indirekt oder direkt referenzieren~\cite{ja:iotawhitepaper}.

Diese Coordinators bieten jedoch eine neue Angriffsfläche. Dabei geht es um das derzeit nicht vollkommen dezentrale System der Tangle bei IOTA. IOTA löst also noch nicht das Problem, ohne dritte Instanz Transaktionen vermitteln zu können. Laut IOTA-Foundation sollen die Coordinators ihren Dienst einstellen, sobald das Tangle Netzwerk ausreichend groß ist, um 34\%-Attacken durch eine zu hohe Anforderung an Rechenleistung abwehren zu können~\cite{ja:iotawhitepaper}.

\subsubsection{Parasiten-Kette}
Die Möglichkeit eine Sub-Tangle aus der Haupt-Tangle zu erstellen, die im weiteren Verlauf wieder in die Haupt-Tangle führt, eröffnet eine weitere Angriffsfläche. Ohne Sicherheitsmechanismen wäre es möglich eine vorher bestätigte Transaktion durch eine vom Angreifer nachträglich publizierten Transaktion zu ersetzen. So könnte zum Beispiel einem Verkäufer, der aufgrund der bestätigt geglaubten Transaktion seine Ware verschickt, ein finanzieller Schaden entstehen.

(PICTURE)

Diese Attacke wird jedoch verhindert, solange die Parasiten-Kette nicht mehr Rechenleistung besitzt als die Hauptkette. Der Tip-Auswahlmechanismus (Markov Chain Monte Carlo, siehe \ref{mcmc} auf Seite \pageref{mcmc}) verhindert, dass Tips ausgewählt werden, die sich von der Gewichtung stark von der Norm unterscheiden.~\cite{je:theTangle}

\subsection{Quantenprozessorresistenz}
Bei der Frage nach Zukunftssicherheit bei IOTA geht es auch um die Resistenz vor Quantenprozessoren. Genauer soll betrachtet werden, ob sich die Fertigstellung von diesen leistungsstarken Prozessoren auf die Sicherheit und Beständigkeit von IOTAs auswirkt.

Die Aufgabe einen gültigen Hash durch ausprobieren zu erlangen stellt eine Anzahl von Versuchen $ O(N) $ dar. Ein Quantencomputer verringert die Operationen einer solchen Aufgabe auf $ O(\sqrt{N}) $ laut des IOTA Whitepapers. Bei der Suche einer passenden Nonce kann erheblich Zeit eingespart werden. Dieser Vorteil ist bei einer schweren Proof-Of-Work Aufgabe wie Beispielsweise die von Bitcoin stärker ausgeprägt, als bei einer ohnehin vergleichsweise leichten Aufgabe wie die von IOTA. Eine solch leichte Aufgabe ermöglicht dem Besitzer eines Quantencomputers keinen starken Vorteil gegenüber anderen Nutzern in der Tangle.

Diese Eigenschaft bietet einen weiteren Vorteil. Da die Winternitz One-Time Signature den privaten Schlüssel hasht um den öffentlichen Schlüssel zu generieren, basiert der Algorithmus nicht auf das diskrete Logarithmus-Problem wie ECC ~\cite{ja:winternitz}. Es wäre also möglich, durch ausprobieren verschiedener Inputs einen gewünschten Hash zu erzielen. Hier könnte sich jedoch der Quantencomputer als Vorteilhaft erweisen. Es wird aber davon ausgegangen, dass es rechnerisch unmöglich ist eine Hashkollision bei der Winternitz One-Time Signature zu finden~\cite{ja:securelamport}.

Diese beiden Gründe können angeführt werden um IOTA als quantenprozessorresistent zu bezeichnen. Jedoch wären weitere Einsatzmöglichkeiten eines solchen Computers denkbar, so könnten sich viele Möglichkeiten offenbaren, eine Tangle mittels Quantenprozessoren unsicher zu machen.

\section{Zusammenfassung}
Das Kapitel hat Sicherheitsrisiken und damit einhergehende Abwehrmechanismen der Distributed Ledger Technologien Bitcoin und IOTA beschrieben. Sie wurden auf Aspekte der Kontosicherheit, Anonymität und Integrität der Transaktionen untersucht. Die beiden Kryptowährungen haben in ähnlichen Bereichen sicherheitsrelevante Risikos, die unterschiedlich gehandhabt werden, vor allem aber die Aspekte Angriffsszenarien und Quantenprozessorresistenz unterscheiden sich stark durch die unterschiedlich Architektur.

